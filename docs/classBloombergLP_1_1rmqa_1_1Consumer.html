<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RMQ - RabbitMQ C++ Library: BloombergLP::rmqa::Consumer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RMQ - RabbitMQ C++ Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>BloombergLP</b></li><li class="navelem"><b>rmqa</b></li><li class="navelem"><a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html">Consumer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classBloombergLP_1_1rmqa_1_1Consumer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">BloombergLP::rmqa::Consumer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Provide a RabbitMQ Async <a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html" title="Provide a RabbitMQ Async Consumer API.">Consumer</a> API.  
 <a href="classBloombergLP_1_1rmqa_1_1Consumer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rmqa__consumer_8h_source.html">rmqa_consumer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1ace80a7ea0ac6b07dc9e8af07a04ca6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html#a1ace80a7ea0ac6b07dc9e8af07a04ca6">Consumer</a> (bslma::ManagedPtr&lt; <a class="el" href="classBloombergLP_1_1rmqp_1_1Consumer.html">rmqp::Consumer</a> &gt; &amp;impl)</td></tr>
<tr class="separator:a1ace80a7ea0ac6b07dc9e8af07a04ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabaf5992477272b5b77bdd5b24901c30"><td class="memItemLeft" align="right" valign="top"><a id="aabaf5992477272b5b77bdd5b24901c30" name="aabaf5992477272b5b77bdd5b24901c30"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>cancel</b> ()</td></tr>
<tr class="memdesc:aabaf5992477272b5b77bdd5b24901c30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the broker to stop delivering messages to this consumer. it's still possible to nack/ack messages from callbacks after cancel is called. <br /></td></tr>
<tr class="separator:aabaf5992477272b5b77bdd5b24901c30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7cd625c98b3dc2c4152d39f32979d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBloombergLP_1_1rmqt_1_1Result.html">rmqt::Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html#a1f7cd625c98b3dc2c4152d39f32979d5">cancelAndDrain</a> (const bsls::TimeInterval &amp;timeout=bsls::TimeInterval(0))</td></tr>
<tr class="memdesc:a1f7cd625c98b3dc2c4152d39f32979d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the broker to stop delivering messages to this consumer.  <a href="classBloombergLP_1_1rmqa_1_1Consumer.html#a1f7cd625c98b3dc2c4152d39f32979d5">More...</a><br /></td></tr>
<tr class="separator:a1f7cd625c98b3dc2c4152d39f32979d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3b2fee3e85d0035d2b749088adb4e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBloombergLP_1_1rmqt_1_1Result.html">rmqt::Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html#a6f3b2fee3e85d0035d2b749088adb4e6">updateTopology</a> (const <a class="el" href="classBloombergLP_1_1rmqa_1_1TopologyUpdate.html">rmqa::TopologyUpdate</a> &amp;topologyUpdate, const bsls::TimeInterval &amp;timeout=bsls::TimeInterval(0))</td></tr>
<tr class="separator:a6f3b2fee3e85d0035d2b749088adb4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1e327847ed60cf2d6b39eef5c2876fb"><td class="memItemLeft" align="right" valign="top"><a id="af1e327847ed60cf2d6b39eef5c2876fb" name="af1e327847ed60cf2d6b39eef5c2876fb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~Consumer</b> ()</td></tr>
<tr class="memdesc:af1e327847ed60cf2d6b39eef5c2876fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor stops the consumer. <br /></td></tr>
<tr class="separator:af1e327847ed60cf2d6b39eef5c2876fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Provide a RabbitMQ Async <a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html" title="Provide a RabbitMQ Async Consumer API.">Consumer</a> API. </p>
<p ><a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html" title="Provide a RabbitMQ Async Consumer API.">Consumer</a> represents a RabbitMQ consumer in a dedicated channel on the Connection. The <a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html#a1ace80a7ea0ac6b07dc9e8af07a04ca6">Consumer::Consumer</a> implementation passed to Connection::createConsumer is invoked on each message sent by the broker </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1ace80a7ea0ac6b07dc9e8af07a04ca6" name="a1ace80a7ea0ac6b07dc9e8af07a04ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ace80a7ea0ac6b07dc9e8af07a04ca6">&#9670;&nbsp;</a></span>Consumer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BloombergLP::rmqa::Consumer::Consumer </td>
          <td>(</td>
          <td class="paramtype">bslma::ManagedPtr&lt; <a class="el" href="classBloombergLP_1_1rmqp_1_1Consumer.html">rmqp::Consumer</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>impl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Create an instance of a <code><a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html" title="Provide a RabbitMQ Async Consumer API.">Consumer</a></code> that will operate through the supplied async consumer implementation. The <code><a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html" title="Provide a RabbitMQ Async Consumer API.">Consumer</a></code> object takes ownership of the supplied asynchronous consumer implementation. <a class="el" href="classBloombergLP_1_1rmqa_1_1Consumer.html" title="Provide a RabbitMQ Async Consumer API.">Consumer</a> should generally be constructed via Connection::createConsumer. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1f7cd625c98b3dc2c4152d39f32979d5" name="a1f7cd625c98b3dc2c4152d39f32979d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f7cd625c98b3dc2c4152d39f32979d5">&#9670;&nbsp;</a></span>cancelAndDrain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBloombergLP_1_1rmqt_1_1Result.html">rmqt::Result</a> BloombergLP::rmqa::Consumer::cancelAndDrain </td>
          <td>(</td>
          <td class="paramtype">const bsls::TimeInterval &amp;&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>bsls::TimeInterval(0)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the broker to stop delivering messages to this consumer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>How long to wait for all delivered (unacked) messages to be processed by the user provided callback. If timeout is 0, the method will wait indefinitely for them to complete, unless the client is disconnected from the broker in between. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a result once all of the remaining messages have been n/acked by the consuming code, or error otherwise e.g. timeout </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This should never be called from a message processing callback </dd></dl>
<dl class="section note"><dt>Note</dt><dd>this relies on the consumer code processing all of the outstanding messages </dd></dl>

</div>
</div>
<a id="a6f3b2fee3e85d0035d2b749088adb4e6" name="a6f3b2fee3e85d0035d2b749088adb4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f3b2fee3e85d0035d2b749088adb4e6">&#9670;&nbsp;</a></span>updateTopology()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBloombergLP_1_1rmqt_1_1Result.html">rmqt::Result</a> BloombergLP::rmqa::Consumer::updateTopology </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBloombergLP_1_1rmqa_1_1TopologyUpdate.html">rmqa::TopologyUpdate</a> &amp;&#160;</td>
          <td class="paramname"><em>topologyUpdate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bsls::TimeInterval &amp;&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>bsls::TimeInterval(0)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Updates topology and waits for the server to confirm the update status</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>How long to wait for. If timeout is 0, the method will indefinitely wait for confirms.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>truthy if all outstanding confirms have arrived. </dd>
<dd>
falsey if update failed or waiting timed out, with an associated error message. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/rmq/rmqa/<a class="el" href="rmqa__consumer_8h_source.html">rmqa_consumer.h</a></li>
<li>src/rmq/rmqa/rmqa_consumer.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
